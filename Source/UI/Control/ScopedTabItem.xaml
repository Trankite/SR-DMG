<TabItem
    x:Class="StarRailDamage.Source.UI.Control.ScopedTabItem"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:StarRailDamage.Source.UI.Control">
    <TabItem.Template>
        <ControlTemplate TargetType="{x:Type TabItem}">
            <ControlTemplate.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{Binding FocusBrush,RelativeSource={RelativeSource Self}}"/>
                </Trigger>
            </ControlTemplate.Triggers>

            <Border Name="PART_Border" CornerRadius="10" Margin="{Binding Padding,RelativeSource={RelativeSource AncestorType={x:Type local:ScopedTabItem}}}" Background="{TemplateBinding Background}">
                <Grid Margin="5,0,5,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <ContentPresenter Grid.Column="1" ContentSource="Header" VerticalAlignment="Center"/>
                    <local:ScopedButton Grid.Column="2" Width="18" Height="18" Margin="1" CornerRadius="5" HorizontalAlignment="Right" Click="TabItemCloseClick">
                        <TextBlock Text="×" FontSize="15" Foreground="{TemplateBinding Foreground}" VerticalAlignment="Center"/>
                    </local:ScopedButton>
                </Grid>
            </Border>
        </ControlTemplate>
    </TabItem.Template>
</TabItem>